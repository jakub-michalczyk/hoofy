@if (data) {
  <a
    [routerLink]="['/listing', data.category, data.subCategory, data.id]"
    class="cursor-pointer h-full"
  >
    <div
      class="bg-white rounded-md relative h-full flex hover:bg-stone-100"
      [ngClass]="{
        'flex-col': !isDetailedMode,
        'flex-row ': isDetailedMode,
      }"
    >
      <!-- IMAGE SECTION -->
      <div
        class="min-h-32 relative"
        [ngClass]="{
          'w-1/2 md:w-1/3 max-h-96': isDetailedMode,
          'w-full h-48': !isDetailedMode,
        }"
      >
        <div class="absolute top-0 right-0 p-2 hidden md:block">
          <div class="bg-white body-5 rounded-full px-2 py-1">
            {{ data.city }}
          </div>
        </div>

        <img
          [src]="data.images.length === 0 ? '/assets/images/placeholder.png' : data.images[0]"
          alt="Listing Image"
          class="rounded h-full object-cover w-full"
        />
      </div>

      <!-- CONTENT SECTION -->
      <div
        class="flex flex-col gap-2 relative"
        [ngClass]="isDetailedMode ? 'h-full py-2 px-6' : 'h-24 mt-1 px-2'"
        [class.w-full]="true"
      >
        <div class="flex justify-between items-center">
          <div class="body-4-light">
            <span class="inline md:hidden">{{ data.city }}, </span
            >{{ data.createdAt | date: 'dd.MM.yyyy' }}
          </div>
          @if (view === EListingItemView.SIMPLE) {
            <hoof-add-to-favourites [contrast]="true"></hoof-add-to-favourites>
          }
        </div>

        <div>
          <div class="flex justify-between gap-4">
            <h3 class="body-2-light">
              {{ data.title.slice(0, view === EListingItemView.DETAILED ? 100 : 30) }}
              {{
                data.title.length >= (view === EListingItemView.DETAILED ? 100 : 30) ? '...' : ''
              }}
            </h3>

            @if (isDetailedMode) {
              <hoof-add-to-favourites
                [contrast]="true"
                class="hidden sm:block"
              ></hoof-add-to-favourites>
            }
          </div>

          <div>
            <span class="body-3-bold">{{ data.price }} PLN</span>
          </div>

          @if (isDetailedMode) {
            <div class="mt-2 text-stone-400 body-3-light hidden sm:block">
              {{ data.description.slice(0, view === EListingItemView.DETAILED ? 300 : 60) }}
              {{
                data.description.length >= (view === EListingItemView.DETAILED ? 300 : 60)
                  ? '...'
                  : ''
              }}
            </div>
          }
        </div>

        <!-- FOOTER -->

        <div class="flex justify-between items-center flex-wrap gap-x-12 gap-y-4 mt-4">
          @if (isDetailedMode) {
            <hoof-listing-details-tags
              [data]="data"
              class="hidden md:block"
            ></hoof-listing-details-tags>

            @if (data.images.length > 1) {
              <div class="md:flex gap-2 hidden justify-end">
                @for (img of data.images.slice(1, 4); track $index) {
                  <img [src]="img" class="w-20 h-20 rounded object-cover" alt="Gallery Image" />
                }
                @if (data.images.length > 4) {
                  <div
                    class="w-20 h-20 bg-gray-200 flex flex-col items-center body-3 text-center justify-center rounded text-gray-600"
                  >
                    <span class="text-4xl block">+</span>
                    {{ data.images.length - 4 }} wiÄ™cej
                  </div>
                }
              </div>
            }
          }
        </div>
      </div>
    </div>
  </a>
}
